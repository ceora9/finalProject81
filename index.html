<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Take Care</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@300&family=Oxygen&display=swap" rel="stylesheet">
        <script>
            $(document).ready(() => {

                $("#submit").click(() => {
                    addCustom()
                });

                $(document).on("keypress", (e) => {
                    if (e.which == 13) {
                        addCustom()
                    }
                });

                function addCustom() {
                    let category = $("#item").val()
                    if (category.length < 1) {
                        alert("Please enter a custom item.")
                        return
                    }

                    let postData = JSON.stringify({
                        "category": category,
                    })

                    $.ajax({
                        url: "/category",
                        type: "POST",
                        data: postData,
                        contentType:"application/json",
                        success: (res, status) => {
                            $("#custom").append(`<li class="custom">${category}</li>`);
                            $("#item").val("");
                        },
                        error: (xhr, _, err) => {
                            
                            if (xhr.status == 400) {
                                alert(`${err}: item already exists!`);
                            }
                        }
                    })
                }

                $("#clear").click(() => {
                    $.ajax({
                        url: "/categories",
                        type: "DELETE",
                        success: function(res, status){
                            $("#custom").html("");
                            $("#completed").html("");
                        }
                    })
                });

                $.get("/categories", (response, status) => {
                    let customCategories = response.custom;
                    for (let category of customCategories) {
                        $("#custom").append(`<li class="custom">${category}</li>`)
                    }
                    let completedCategories = response.completed;
                    for (let category of completedCategories) {
                        $("#completed").append(`<li class="completed">${category}</li>`)
                    }
                });
            });
        </script>
    </head>

    <body>
        <h1>Take Care</h1>
        <h3><i>Take Care</i> helps you track your self-care activities.</h3>
        <p>Personalize your list of self-care activities, create daily and weekly goals, and set reminders to help you stay on your path.</p>
        
        <div class="categories">
            <h4>Make selections from the categories below.<br>Prioritize items that will have the biggest impact on your self-care routine.</h4>
            <table id="exercise">
                <h3>Exercise</h3>
                <input type="radio" id="run" value="run">
                <label for="run">run</label><br>

                <input type="radio" id="dance" value="dance">
                <label for="dance">dance</label><br>

                <input type="radio" id="yoga" value="yoga">
                <label for="yoga">yoga</label><br>
            </table>
            
            <table id="sleep">
                <h3>Sleep</h3>

                <input type="radio" id="yoga" value="yoga">
                <label for="yoga">yoga</label><br>

                <input type="radio" id="breathing-exercises" value="breathing-exercises">
                <label for="breathing-exercises">breathing exercises</label><br>
            </table>
            
            <table id="nutrition">
                <h3>Nutrition</h3>

                <input type="radio" id="water" value="water">
                <label for="water">drink 8 glasses of water</label><br>

                <input type="radio" id="vegetables" value="vegetables">
                <label for="vegetables">eat 5 servings of fruits and vegetables</label><br>
            </table>
            
            <table id="recreation">
                <h3>Recreation & Relaxation</h3>

                <input type="radio" id="hiking" value="hiking">
                <label for="hiking">hiking</label><br>

                <input type="radio" id="meditate" value="meditate">
                <label for="meditate">meditate</label><br>

                <input type="radio" id="beach" value="beach">
                <label for="beach">take a walk on the beach</label><br>

                <input type="radio" id="biking" value="biking">
                <label for="biking">biking</label><br> 
            </table>
            
            <table id="activities">
                <h3>Activities</h3>

                <input type="radio" id="music" value="music">
                <label for="music">play music</label><br>

                <input type="radio" id="art" value="art">
                <label for="art">make some art</label><br>

                <input type="radio" id="bake" value="bake">
                <label for="bake">bake</label><br>
            </table>
        </div>

        <h3>Customize your self-care items:</h3>

        <div id="addItem">
            Category:
            <input id="item" type="text" name="add_item"/>
            <button id="submit" type="button">Add</button>
            <button id="clear" type="button">Clear All</button>
        </div>
        <div>
            <h4>Custom:</h4>
            <ul id="custom"></ul>
        </div>

        <h4>What will you do today to take care of yourself?</h4>
        
        <div>
            <h4>Completed:</h4>
            <ul id="completed"></ul>
        </div>

        <div class="notifications"></div>

        <div class="progress"></div>

        <!-- <script src="app.js" async defer></script> -->

    </body>
</html>